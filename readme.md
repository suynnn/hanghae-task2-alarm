# 과제 2. 재입고 알림 시스템
## **비즈니스 요구 사항**

### 1. 재입고 알림을 전송하기 전, 상품의 재입고 회차를 1 증가 시킨다
- 회차가 증가하면 그 시점 부터 재입고 알림을 등록할 때 증가된 회차 정보로 저장한다
### 2. 상품이 재입고 되었을 때, 재입고 알림을 설정한 유저들에게 알림 메시지를 전달해야 한다
- 재입고 알림을 설정한 유저들의 정보를 가지고 DB에 그 내역을 저장한다
### 3. 재입고 알림은 재입고 알림을 설정한 유저 순서대로 메시지를 전송한다
- 수신여부 체크해서 아직 알림을 받지 않은 유저들부터 순서대로 전송한다
### 4. 회차별 재입고 알림을 받은 유저 목록을 저장해야 한다 
- 알림을 신청해서 성공적으로 받은 유저들 정보 저장한다
### 5. 재입고 알림을 보내던 중 재고가 모두 없어진다면 알림 보내는 것을 중단합니다

### 6. 재입고 알림 전송의 상태를 DB 에 저장해야 한다
- 알림을 전송하고 나서 그 상태를 저장한다

## 기술적 요구 사항
### 1. 알림 메시지는 1초에 최대 500개의 요청을 보낼 수 있다
- 토큰 버킷 알고리즘 기반 bucket4j로 처리율 제한한다
### 2. Mysql 조회 시, 인덱스를 잘 탈 수 있게 설계해야 한다
### 3. 설계해야 할 테이블 목록
- 설계해야 할 테이블 목록
    1. Product (상품)
        1. 상품 아이디
        2. 재입고 회차
        3. 재고 상태
    2. ProductNotificationHistory (상품별 재입고 알림 히스토리)
        1. 상품 아이디
        2. 재입고 회차
        3. 재입고 알림 발송 상태
        4. 마지막 발송 유저 아이디
    3. ProductUserNotification (상품별 재입고 알림을 설정한 유저)
        1. 상품 아이디
        2. 유저 아이디
        3. 활성화 여부
        4. 생성 날짜
        5. 수정 날짜
    4. ProductUserNotificationHistory (상품 + 유저별 알림 히스토리)
        1. 상품 아이디
        2. 유저 아이디
        3. 재입고 회차
        4. 발송 날짜
### 4. (Optional) 예외에 의해 알림 메시지 발송이 실패한 경우, manual 하게 상품 재입고 알림 메시지를 다시 보내는 API를 호출한다면 마지막으로 전송 성공한 이후 유저부터 다시 알림 메시지를 보낼 수 있어야 한다
### 5. 시스템 구조 상 비동기로 처리 되어야 하는 부분은 존재하지 않는다고 가정한다